
{
"variables": {
   "terraform_version": "0.12.20",
   "docker_username": "",
   "docker_password": "",
   "docker_push_repository": ""
 },
"builders": [
   {
     "type": "docker",
     "image": "hashicorp/terraform:0.12.20",
     "commit": true,
     "changes": [
        "VOLUME /data",
        "WORKDIR /data"
     ]
   }
 ]

}

"post-processors": [
 [
   {
        "type": "docker-tag",
        "repository": "{{user `docker_push_repository`}}",
        "tag": "{{user `terraform_version`}}"
   },
   {
        "type": "docker-push",
        "login": "false",
        "login_username": "{{user `docker_username`}}",
        "login_password": "{{user `docker_password`}}"
   }
]
 ]

}
